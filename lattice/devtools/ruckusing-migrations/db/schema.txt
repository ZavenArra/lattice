CREATE TABLE `confirmations` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `confirmation_id` varchar(100) CHARACTER SET latin1 NOT NULL,
  `type` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  `email` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  `controller` varchar(100) CHARACTER SET latin1 NOT NULL,
  `action` varchar(100) CHARACTER SET latin1 NOT NULL,
  `arguments` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `timeouthours` int(11) NOT NULL DEFAULT '5',
  `confirmed` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`,`confirmation_id`)
) ENGINE=InnoDB AUTO_INCREMENT=27 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE `contents` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `object_id` int(11) NOT NULL DEFAULT '0',
  `title` varchar(255) CHARACTER SET latin1 NOT NULL DEFAULT '',
  `field1` text CHARACTER SET latin1,
  `field2` text CHARACTER SET latin1,
  `field3` text CHARACTER SET latin1,
  `field4` text CHARACTER SET latin1,
  `field5` text CHARACTER SET latin1,
  `field6` text CHARACTER SET latin1,
  `field7` text CHARACTER SET latin1,
  `field8` text CHARACTER SET latin1,
  `field9` text CHARACTER SET latin1,
  `field10` text CHARACTER SET latin1,
  `field11` text CHARACTER SET latin1,
  `field12` text CHARACTER SET latin1,
  `field13` text CHARACTER SET latin1,
  `field14` text CHARACTER SET latin1,
  `field15` text CHARACTER SET latin1,
  `field16` text CHARACTER SET latin1,
  `field17` text CHARACTER SET latin1,
  `field18` text CHARACTER SET latin1,
  `field19` text CHARACTER SET latin1,
  `field20` text CHARACTER SET latin1,
  `field21` text CHARACTER SET latin1,
  `field22` text CHARACTER SET latin1,
  `field23` text CHARACTER SET latin1,
  `field24` text CHARACTER SET latin1,
  `field25` text CHARACTER SET latin1,
  `field26` text CHARACTER SET latin1,
  `field27` text CHARACTER SET latin1,
  `field28` text CHARACTER SET latin1,
  `field29` text CHARACTER SET latin1,
  `field30` text CHARACTER SET latin1,
  `field31` text CHARACTER SET latin1,
  `field32` text CHARACTER SET latin1,
  `field33` text CHARACTER SET latin1,
  `field34` text CHARACTER SET latin1,
  `field35` text CHARACTER SET latin1,
  `field36` text CHARACTER SET latin1,
  `field37` text CHARACTER SET latin1,
  `field38` text CHARACTER SET latin1,
  `field39` text CHARACTER SET latin1,
  `field40` text CHARACTER SET latin1,
  `field41` text CHARACTER SET latin1,
  `field42` text CHARACTER SET latin1,
  `field43` text CHARACTER SET latin1,
  `field44` text CHARACTER SET latin1,
  `field45` text CHARACTER SET latin1,
  `field46` text CHARACTER SET latin1,
  `field47` text CHARACTER SET latin1,
  `field48` text CHARACTER SET latin1,
  `field49` text CHARACTER SET latin1,
  `field50` text CHARACTER SET latin1,
  `field51` text CHARACTER SET latin1,
  `field52` text CHARACTER SET latin1,
  `field53` text CHARACTER SET latin1,
  `field54` text CHARACTER SET latin1,
  `field55` text CHARACTER SET latin1,
  `field56` text CHARACTER SET latin1,
  `field57` text CHARACTER SET latin1,
  `field58` text CHARACTER SET latin1,
  `field59` text CHARACTER SET latin1,
  `field60` text CHARACTER SET latin1,
  `field61` text CHARACTER SET latin1,
  `field62` text CHARACTER SET latin1,
  `field63` text CHARACTER SET latin1,
  `field64` text CHARACTER SET latin1,
  `field65` text CHARACTER SET latin1,
  `field66` text CHARACTER SET latin1,
  `field67` text CHARACTER SET latin1,
  `field68` text CHARACTER SET latin1,
  `field69` text CHARACTER SET latin1,
  `field70` text CHARACTER SET latin1,
  `field71` text CHARACTER SET latin1,
  `field72` text CHARACTER SET latin1,
  `field73` text CHARACTER SET latin1,
  `field74` text CHARACTER SET latin1,
  `field75` text CHARACTER SET latin1,
  `field76` text CHARACTER SET latin1,
  `field77` text CHARACTER SET latin1,
  `field78` text CHARACTER SET latin1,
  `field79` text CHARACTER SET latin1,
  `field80` text CHARACTER SET latin1,
  `field81` text CHARACTER SET latin1,
  `field82` text CHARACTER SET latin1,
  `field83` text CHARACTER SET latin1,
  `field84` text CHARACTER SET latin1,
  `field85` text CHARACTER SET latin1,
  `field86` text CHARACTER SET latin1,
  `field87` text CHARACTER SET latin1,
  `field88` text CHARACTER SET latin1,
  `field89` text CHARACTER SET latin1,
  `field90` text CHARACTER SET latin1,
  `field91` text CHARACTER SET latin1,
  `field92` text CHARACTER SET latin1,
  `field93` text CHARACTER SET latin1,
  `field94` text CHARACTER SET latin1,
  `field95` text CHARACTER SET latin1,
  `field96` text CHARACTER SET latin1,
  `field97` text CHARACTER SET latin1,
  `field98` text CHARACTER SET latin1,
  `field99` text CHARACTER SET latin1,
  `field100` text CHARACTER SET latin1,
  `file1` text CHARACTER SET latin1,
  `file2` text CHARACTER SET latin1,
  `file3` text CHARACTER SET latin1,
  `file4` text CHARACTER SET latin1,
  `file5` text CHARACTER SET latin1,
  `file6` text CHARACTER SET latin1,
  `file7` text CHARACTER SET latin1,
  `file8` text CHARACTER SET latin1,
  `file9` text CHARACTER SET latin1,
  `file10` text CHARACTER SET latin1,
  `file11` text CHARACTER SET latin1,
  `file12` text CHARACTER SET latin1,
  `file13` text CHARACTER SET latin1,
  `file14` text CHARACTER SET latin1,
  `file15` text CHARACTER SET latin1,
  `file16` text CHARACTER SET latin1,
  `file17` text CHARACTER SET latin1,
  `file18` text CHARACTER SET latin1,
  `file19` text CHARACTER SET latin1,
  `file20` text CHARACTER SET latin1,
  `file21` text CHARACTER SET latin1,
  `file22` text CHARACTER SET latin1,
  `file23` text CHARACTER SET latin1,
  `file24` text CHARACTER SET latin1,
  `file25` text CHARACTER SET latin1,
  `file26` text CHARACTER SET latin1,
  `file27` text CHARACTER SET latin1,
  `file28` text CHARACTER SET latin1,
  `file29` text CHARACTER SET latin1,
  `file30` text CHARACTER SET latin1,
  `file31` text CHARACTER SET latin1,
  `file32` text CHARACTER SET latin1,
  `file33` text CHARACTER SET latin1,
  `file34` text CHARACTER SET latin1,
  `file35` text CHARACTER SET latin1,
  `file36` text CHARACTER SET latin1,
  `file37` text CHARACTER SET latin1,
  `file38` text CHARACTER SET latin1,
  `file39` text CHARACTER SET latin1,
  `file40` text CHARACTER SET latin1,
  `file41` text CHARACTER SET latin1,
  `file42` text CHARACTER SET latin1,
  `file43` text CHARACTER SET latin1,
  `file44` text CHARACTER SET latin1,
  `file45` text CHARACTER SET latin1,
  `file46` text CHARACTER SET latin1,
  `file47` text CHARACTER SET latin1,
  `file48` text CHARACTER SET latin1,
  `file49` text CHARACTER SET latin1,
  `file50` text CHARACTER SET latin1,
  `file51` text CHARACTER SET latin1,
  `file52` text CHARACTER SET latin1,
  `file53` text CHARACTER SET latin1,
  `file54` text CHARACTER SET latin1,
  `file55` text CHARACTER SET latin1,
  `file56` text CHARACTER SET latin1,
  `file57` text CHARACTER SET latin1,
  `file58` text CHARACTER SET latin1,
  `file59` text CHARACTER SET latin1,
  `file60` text CHARACTER SET latin1,
  `file61` text CHARACTER SET latin1,
  `file62` text CHARACTER SET latin1,
  `file63` text CHARACTER SET latin1,
  `file64` text CHARACTER SET latin1,
  `file65` text CHARACTER SET latin1,
  `file66` text CHARACTER SET latin1,
  `file67` text CHARACTER SET latin1,
  `file68` text CHARACTER SET latin1,
  `file69` text CHARACTER SET latin1,
  `file71` text CHARACTER SET latin1,
  `file72` text CHARACTER SET latin1,
  `file73` text CHARACTER SET latin1,
  `file74` text CHARACTER SET latin1,
  `file75` text CHARACTER SET latin1,
  `file76` text CHARACTER SET latin1,
  `file77` text CHARACTER SET latin1,
  `file78` text CHARACTER SET latin1,
  `file79` text CHARACTER SET latin1,
  `file80` text CHARACTER SET latin1,
  `file81` text CHARACTER SET latin1,
  `file82` text CHARACTER SET latin1,
  `file83` text CHARACTER SET latin1,
  `file84` text CHARACTER SET latin1,
  `file85` text CHARACTER SET latin1,
  `file86` text CHARACTER SET latin1,
  `file87` text CHARACTER SET latin1,
  `file88` text CHARACTER SET latin1,
  `file89` text CHARACTER SET latin1,
  `file90` text CHARACTER SET latin1,
  `file91` text CHARACTER SET latin1,
  `file92` text CHARACTER SET latin1,
  `file93` text CHARACTER SET latin1,
  `file94` text CHARACTER SET latin1,
  `file95` text CHARACTER SET latin1,
  `file96` text CHARACTER SET latin1,
  `file97` text CHARACTER SET latin1,
  `file98` text CHARACTER SET latin1,
  `file99` text CHARACTER SET latin1,
  `file100` text CHARACTER SET latin1,
  `flag1` text CHARACTER SET latin1,
  `flag2` text CHARACTER SET latin1,
  `flag3` text CHARACTER SET latin1,
  `flag4` text CHARACTER SET latin1,
  `flag5` text CHARACTER SET latin1,
  `flag6` text CHARACTER SET latin1,
  `flag7` text CHARACTER SET latin1,
  `flag8` text CHARACTER SET latin1,
  `flag9` text CHARACTER SET latin1,
  `flag10` text CHARACTER SET latin1,
  `flag11` text CHARACTER SET latin1,
  `flag12` text CHARACTER SET latin1,
  `flag13` text CHARACTER SET latin1,
  `flag14` text CHARACTER SET latin1,
  `flag15` text CHARACTER SET latin1,
  `flag16` text CHARACTER SET latin1,
  `flag17` text CHARACTER SET latin1,
  `flag18` text CHARACTER SET latin1,
  `flag19` text CHARACTER SET latin1,
  `flag20` text CHARACTER SET latin1,
  `flag21` text CHARACTER SET latin1,
  `flag22` text CHARACTER SET latin1,
  `flag23` text CHARACTER SET latin1,
  `flag24` text CHARACTER SET latin1,
  `flag25` text CHARACTER SET latin1,
  `flag26` text CHARACTER SET latin1,
  `flag27` text CHARACTER SET latin1,
  `flag28` text CHARACTER SET latin1,
  `flag29` text CHARACTER SET latin1,
  `flag30` text CHARACTER SET latin1,
  `flag31` text CHARACTER SET latin1,
  `flag32` text CHARACTER SET latin1,
  `flag33` text CHARACTER SET latin1,
  `flag34` text CHARACTER SET latin1,
  `flag35` text CHARACTER SET latin1,
  `flag36` text CHARACTER SET latin1,
  `flag37` text CHARACTER SET latin1,
  `flag38` text CHARACTER SET latin1,
  `flag39` text CHARACTER SET latin1,
  `flag40` text CHARACTER SET latin1,
  `flag41` text CHARACTER SET latin1,
  `flag42` text CHARACTER SET latin1,
  `flag43` text CHARACTER SET latin1,
  `flag44` text CHARACTER SET latin1,
  `flag45` text CHARACTER SET latin1,
  `flag46` text CHARACTER SET latin1,
  `flag47` text CHARACTER SET latin1,
  `flag48` text CHARACTER SET latin1,
  `flag49` text CHARACTER SET latin1,
  `flag50` text CHARACTER SET latin1,
  `flag51` text CHARACTER SET latin1,
  `flag52` text CHARACTER SET latin1,
  `flag53` text CHARACTER SET latin1,
  `flag54` text CHARACTER SET latin1,
  `flag55` text CHARACTER SET latin1,
  `flag56` text CHARACTER SET latin1,
  `flag57` text CHARACTER SET latin1,
  `flag58` text CHARACTER SET latin1,
  `flag59` text CHARACTER SET latin1,
  `flag60` text CHARACTER SET latin1,
  `flag61` text CHARACTER SET latin1,
  `flag62` text CHARACTER SET latin1,
  `flag63` text CHARACTER SET latin1,
  `flag64` text CHARACTER SET latin1,
  `flag65` text CHARACTER SET latin1,
  `flag66` text CHARACTER SET latin1,
  `flag67` text CHARACTER SET latin1,
  `flag68` text CHARACTER SET latin1,
  `flag69` text CHARACTER SET latin1,
  `flag70` text CHARACTER SET latin1,
  `flag71` text CHARACTER SET latin1,
  `flag72` text CHARACTER SET latin1,
  `flag73` text CHARACTER SET latin1,
  `flag74` text CHARACTER SET latin1,
  `flag75` text CHARACTER SET latin1,
  `flag76` text CHARACTER SET latin1,
  `flag77` text CHARACTER SET latin1,
  `flag78` text CHARACTER SET latin1,
  `flag79` text CHARACTER SET latin1,
  `flag80` text CHARACTER SET latin1,
  `flag81` text CHARACTER SET latin1,
  `flag82` text CHARACTER SET latin1,
  `flag83` text CHARACTER SET latin1,
  `flag84` text CHARACTER SET latin1,
  `flag85` text CHARACTER SET latin1,
  `flag86` text CHARACTER SET latin1,
  `flag87` text CHARACTER SET latin1,
  `flag88` text CHARACTER SET latin1,
  `flag89` text CHARACTER SET latin1,
  `flag90` text CHARACTER SET latin1,
  `flag91` text CHARACTER SET latin1,
  `flag92` text CHARACTER SET latin1,
  `flag93` text CHARACTER SET latin1,
  `flag94` text CHARACTER SET latin1,
  `flag95` text CHARACTER SET latin1,
  `flag96` text CHARACTER SET latin1,
  `flag97` text CHARACTER SET latin1,
  `flag98` text CHARACTER SET latin1,
  `flag99` text CHARACTER SET latin1,
  `flag100` text CHARACTER SET latin1,
  `activity` char(1) CHARACTER SET latin1 DEFAULT NULL,
  PRIMARY KEY (`object_id`),
  KEY `id` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=112 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE `files` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `filename` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL,
  `mime` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=126 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE `initializedmodules` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `module` varchar(255) NOT NULL,
  `status` enum('INITIALIZED','DISABLED','NOTINITIALIZED') NOT NULL DEFAULT 'NOTINITIALIZED',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8;

CREATE TABLE `languages` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `code` varchar(10) NOT NULL,
  `fullname` varchar(100) NOT NULL,
  `activity` char(1) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=latin1;

CREATE TABLE `lattices` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(200) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=latin1;

CREATE TABLE `objectelementrelationships` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `object_id` int(11) NOT NULL,
  `elementobject_id` int(11) NOT NULL,
  `name` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE `objectmaps` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `objecttype_id` int(11) NOT NULL,
  `type` enum('field','flag','file','object') CHARACTER SET latin1 NOT NULL,
  `index` int(11) NOT NULL,
  `column` varchar(100) CHARACTER SET latin1 NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=31 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE `objectrelationships` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `lattice_id` int(11) NOT NULL,
  `object_id` int(11) NOT NULL,
  `connectedobject_id` int(11) NOT NULL,
  `sortorder` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=112 DEFAULT CHARSET=latin1;

CREATE TABLE `objects` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `objecttype_id` int(11) NOT NULL DEFAULT '0',
  `parentid` int(11) DEFAULT NULL,
  `language_id` int(11) DEFAULT NULL,
  `rosetta_id` int(11) DEFAULT NULL,
  `slug` varchar(50) CHARACTER SET utf8 DEFAULT NULL,
  `decoupleSlugTitle` tinyint(4) DEFAULT '0',
  `dateadded` timestamp NULL DEFAULT NULL,
  `lastmodified` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `published` tinyint(1) NOT NULL DEFAULT '0',
  `activity` char(1) CHARACTER SET latin1 DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `identifier` (`slug`,`language_id`)
) ENGINE=InnoDB AUTO_INCREMENT=112 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE `objects_tags` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `object_id` int(11) NOT NULL,
  `tag_id` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;

CREATE TABLE `objecttypes` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `objecttypename` varchar(50) CHARACTER SET latin1 NOT NULL DEFAULT '',
  `contenttable` varchar(50) CHARACTER SET latin1 DEFAULT NULL,
  `nodeType` varchar(50) CHARACTER SET latin1 DEFAULT NULL,
  `contentType` varchar(20) CHARACTER SET latin1 DEFAULT NULL,
  `sort_order` smallint(2) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE `ratings` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `object_id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  `object_type_id` int(11) NOT NULL,
  `rating` tinyint(4) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=34 DEFAULT CHARSET=latin1 COLLATE=latin1_general_ci;

CREATE TABLE `ratingsobjecttypes` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `object_type` varchar(200) COLLATE latin1_general_ci NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=2 DEFAULT CHARSET=latin1 COLLATE=latin1_general_ci;

CREATE TABLE `roles` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(32) NOT NULL,
  `description` varchar(255) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uniq_name` (`name`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8;

CREATE TABLE `roles_users` (
  `user_id` int(10) unsigned NOT NULL,
  `role_id` int(10) unsigned NOT NULL,
  PRIMARY KEY (`user_id`,`role_id`),
  KEY `fk_role_id` (`role_id`),
  CONSTRAINT `roles_users_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE,
  CONSTRAINT `roles_users_ibfk_2` FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `rosettas` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=38 DEFAULT CHARSET=latin1;

CREATE TABLE `schema_migrations` (
  `version` varchar(255) DEFAULT NULL,
  UNIQUE KEY `idx_schema_migrations_version` (`version`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

CREATE TABLE `sitestates` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `selectedTags` text CHARACTER SET latin1 NOT NULL,
  `selectedCategories` text CHARACTER SET latin1 NOT NULL,
  `tabState` enum('description','transcript') CHARACTER SET latin1 DEFAULT NULL,
  `openVideo` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=346 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE `tagbuckets` (
  `id` int(11) NOT NULL,
  `name` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `tags` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `tag` varchar(255) NOT NULL,
  `language_id` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;

CREATE TABLE `tags_tagbuckets` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `tag_id` int(11) NOT NULL,
  `tagbucket_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `tagbucket_id` (`tagbucket_id`),
  KEY `tag_id` (`tag_id`),
  CONSTRAINT `tags_tagbuckets_tag_id_fk` FOREIGN KEY (`tag_id`) REFERENCES `tags` (`id`),
  CONSTRAINT `tags_tagbuckets_tagbucket_id_fk` FOREIGN KEY (`tagbucket_id`) REFERENCES `tagbuckets` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `user_tokens` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int(11) unsigned NOT NULL,
  `user_agent` varchar(40) NOT NULL,
  `token` varchar(40) NOT NULL,
  `type` varchar(100) NOT NULL,
  `created` int(10) unsigned NOT NULL,
  `expires` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uniq_token` (`token`),
  KEY `fk_user_id` (`user_id`),
  CONSTRAINT `user_tokens_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `users` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `email` varchar(127) NOT NULL,
  `username` varchar(32) NOT NULL DEFAULT '',
  `password` varchar(64) NOT NULL,
  `logins` int(10) unsigned NOT NULL DEFAULT '0',
  `last_login` int(10) unsigned DEFAULT NULL,
  `status` enum('ACTIVE','INCOMPLETE','DELETED') NOT NULL DEFAULT 'INCOMPLETE',
  `firstname` varchar(255) NOT NULL,
  `lastname` varchar(255) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uniq_username` (`username`),
  UNIQUE KEY `uniq_email` (`email`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8;

CREATE TABLE `videoviews` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `site_id` int(11) NOT NULL,
  `viewertype_id` int(11) NOT NULL,
  `timestamp` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

